#!/bin/groovy
pipeline {
  parameters {
    string(name: 'VERSION', defaultValue: 'fedora:latest', description: '')
    string(name: 'BUILDNUMBER', defaultValue: '1', description: '')
  }

  agent {
    docker {
      image "${VERSION}"
      args '-u 0:0'
    }
  }
  stages {
    stage ('Get artifacts') {
      steps {
        copyArtifacts(projectName: 'mm_build', selector: specific("${params.BUILDNUMBER}"));
      }
    }
    stage('Version') {
      steps {
        echo "${VERSION} from build ${params.BUILDNUMBER}"
      }
    }
    stage('Install') {
      steps {
        sh "rpm -hiv hello-2.10-0.x86_64.rpm"
      }
     }
    stage ('Test') {
      steps {
        sh "/usr/bin/hello"
      }
    }
  }
}
